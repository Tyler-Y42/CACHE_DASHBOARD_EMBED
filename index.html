<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transect Dashboard Sidebar</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      display: flex;
      flex-direction: column;
    }
    .header {
      background: #1f2937;
      color: #f9fafb;
      padding: 16px;
    }
    .header h2 {
      margin: 0 0 8px;
      font-size: 1.25rem;
      border-bottom: 1px solid #374151;
      padding-bottom: 4px;
    }
    .menu-container {
      display: none;
      flex-wrap: wrap;
    }
    .menu-container.active {
      display: flex;
      flex-wrap: wrap;
    }
    .menu-container button {
      background: #374151;
      border: none;
      color: #f9fafb;
      padding: 10px 16px;
      margin: 4px;
      font-size: 0.95rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .menu-container button:hover {
      background: #4b5563;
    }
    .menu-container .back {
      background: #6b7280;
    }
    .menu-container .back:hover {
      background: #9ca3af;
    }
    .content {
      flex: 1;
      background: #ffffff;
      padding: 24px;
      overflow: auto;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #plotContainer img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>
  <header class="header">
    <h2 id="headerTitle">Data Selector</h2>
    <div id="mainMenu" class="menu-container active">
      <button data-action="openSubmenu" data-target="transectMenu">Transects</button>
      <button data-action="showPlot" data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/7fe95b3668074b0ab6baf96b9e6d256f/data">Piper Diagram</button>
      <button data-action="showPlot" data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/DIST_TEMP_URL/data">Distance vs Temp</button>
    </div>
    <div id="transectMenu" class="menu-container">
      <button class="back" data-action="back" data-target="mainMenu">← Back</button>
      <button data-action="openSubmenu" data-target="plotTypeMenu" data-transect="Logan Transect (B)">Logan (B)</button>
      <button data-action="openSubmenu" data-target="plotTypeMenu" data-transect="Hyrum Transect (A)">Hyrum (A)</button>
    </div>
    <div id="plotTypeMenu" class="menu-container">
      <button class="back" data-action="back" data-target="transectMenu">← Back</button>
      <button data-action="showPlot" data-url-field="plot">Cross-Section</button>
      <button data-action="showPlot" data-url-field="parameters">Recharge Parameters</button>
      <button data-action="openSubmenu" data-target="ionMenu">Ion Chemistry</button>
    </div>
    <div id="ionMenu" class="menu-container">
      <button class="back" data-action="back" data-target="plotTypeMenu">← Back</button>
      <button data-action="showPlot" data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/cf95fe0c55334998877d45a03689b6ac/data">Piper</button>
      <button data-action="showPlot" data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/STIFF_R_URL/data">Stiff</button>
    </div>
  </header>
  <main class="content">
    <div id="plotContainer"><em>Select a menu option above.</em></div>
  </main>
  <script>
    var headerTitle = document.getElementById('headerTitle');
    var data = {
      "Logan Transect (B)": { plot: "https://uofu.maps.arcgis.com/sharing/rest/content/items/e2e2fa4b2ed84182a8dad2d3d77097a3/data", parameters: "https://uofu.maps.arcgis.com/sharing/rest/content/items/5036ead16a224cc68c762c5c25476a38/data" },
      "Hyrum Transect (A)": { plot: "https://uofu.maps.arcgis.com/sharing/rest/content/items/77d3a3b837714c5e9e0bcfb5e11c8b9f/data", parameters: "https://uofu.maps.arcgis.com/sharing/rest/content/items/9987285a68f1475fbd25bbcbd2784cb0/data" }
    };
    var containers = document.querySelectorAll('.menu-container');
    function showContainer(id) {
      containers.forEach(function(c) { c.classList.remove('active'); });
      document.getElementById(id).classList.add('active');
    }
    document.querySelectorAll('[data-action]').forEach(function(btn) {
      btn.addEventListener('click', function() {
        var action = btn.getAttribute('data-action');
        if (action === 'openSubmenu') {
          var target = btn.getAttribute('data-target');
          var tran = btn.getAttribute('data-transect');
          if (target === 'transectMenu') {
            headerTitle.innerText = 'Transects';
          } else if (tran) {
            headerTitle.innerText = tran;
          } else if (target === 'ionMenu') {
            headerTitle.innerText += ' – ' + btn.innerText;
          }
          if (tran) { currentTransect = tran; }
          showContainer(target);
        } else if (action === 'back') {
          var prev = btn.getAttribute('data-target');
          if (prev === 'mainMenu') {
            headerTitle.innerText = 'Data Selector';
          } else if (prev === 'transectMenu') {
            headerTitle.innerText = 'Transects';
          } else if (prev === 'plotTypeMenu') {
            headerTitle.innerText = currentTransect;
          }
          showContainer(prev);
        } else if (action === 'showPlot') {
          var url = btn.getAttribute('data-url') || data[currentTransect][btn.getAttribute('data-url-field')];
          document.getElementById('plotContainer').innerHTML = '<img src="' + url + '" alt="Plot"/>';
        }
      });
    });
    showContainer('mainMenu');
  </script>
</body>
</html>
