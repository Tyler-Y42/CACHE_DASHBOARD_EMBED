<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Transect Dashboard Sidebar</title>
  <style>
    /* Basic reset & layout */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', Tahoma, sans-serif;
      display: flex;
      flex-direction: column;
    }

    /* Header styling */
    .header {
      background: #1f2937;
      color: #f9fafb;
      padding: 16px;
    }
    .header h2 {
      margin: 0 0 8px;
      font-size: 1.25rem;
      border-bottom: 1px solid #374151;
      padding-bottom: 4px;
    }

    /* Menu containers */
    .menu-container {
      display: none;
      flex-wrap: wrap;
    }
    .menu-container.active {
      display: flex;
    }

    /* Buttons */
    .menu-container button {
      background: #374151;
      border: none;
      color: #f9fafb;
      padding: 10px 16px;
      margin: 4px;
      font-size: 0.95rem;
      border-radius: 4px;
      cursor: pointer;
    }
    .menu-container button:hover {
      background: #4b5563;
    }
    .menu-container .back {
      background: #6b7280;
    }
    .menu-container .back:hover {
      background: #9ca3af;
    }

    /* Main content area */
    .content {
      flex: 1;
      background: #ffffff;
      padding: 24px;
      overflow: auto;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    /* Welcome panel styling */
    .welcome-text {
      max-width: 800px;
      color: #333;
      line-height: 1.6;
    }
    .welcome-text h3 {
      margin-top: 0;
      font-size: 1.5rem;
      color: #1f2937;
    }
    .welcome-text p {
      margin-bottom: 1rem;
      font-size: 1rem;
    }

    /* Plot image styling */
    #plotContainer img {
      max-width: 100%;
      max-height: 100%;
      border-radius: 4px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

  <!-- HEADER & MENUS -->
  <header class="header">
    <h2 id="headerTitle">Data Selector</h2>

    <div id="mainMenu" class="menu-container active">
      <button data-action="openSubmenu" data-target="transectMenu">Transects</button>
      <button data-action="showPlot"
              data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/7fe95b3668074b0ab6baf96b9e6d256f/data">
        Piper Diagram
      </button>
      <button data-action="showPlot"
              data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/DIST_TEMP_URL/data">
        Distance vs Temp
      </button>
    </div>

    <div id="transectMenu" class="menu-container">
      <button class="back" data-action="back" data-target="mainMenu">← Back</button>
      <button data-action="openSubmenu"
              data-target="plotTypeMenu"
              data-transect="Logan Transect (B)">
        Logan (B)
      </button>
      <button data-action="openSubmenu"
              data-target="plotTypeMenu"
              data-transect="Hyrum Transect (A)">
        Hyrum (A)
      </button>
    </div>

    <div id="plotTypeMenu" class="menu-container">
      <button class="back" data-action="back" data-target="transectMenu">← Back</button>
      <button data-action="showPlot" data-url-field="plot">Cross-Section</button>
      <button data-action="showPlot" data-url-field="parameters">Recharge Parameters</button>
      <button data-action="openSubmenu" data-target="ionMenu">Ion Chemistry</button>
    </div>

    <div id="ionMenu" class="menu-container">
      <button class="back" data-action="back" data-target="plotTypeMenu">← Back</button>
      <button data-action="showPlot"
              data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/cf95fe0c55334998877d45a03689b6ac/data">
        Piper
      </button>
      <button data-action="showPlot"
              data-url="https://uofu.maps.arcgis.com/sharing/rest/content/items/STIFF_R_URL/data">
        Stiff
      </button>
    </div>
  </header>

  <!-- WELCOME OR PLOT AREA -->
  <main class="content">
    <div id="plotContainer" class="welcome-text">
      <h3>Welcome to the Dashboard!</h3>
      <p>
        This site serves as an interactive compilation of groundwater data for the study,
        and is updated periodically as information is compiled. All data is preliminary.
      </p>
      <p>
        Individual wells within the web map can be clicked to pop‐out a summary of
        geochemistry, well construction information, and other parameters for that well. The data
        selector above contains plots that include all wells in the study area,
        in addition to plots for each respective flow transect.
      </p>
    </div>
  </main>

  <script>
    let currentTransect = null;
    const headerTitle = document.getElementById('headerTitle');
    const containers = document.querySelectorAll('.menu-container');

    const data = {
      "Logan Transect (B)": {
        plot:       "https://uofu.maps.arcgis.com/sharing/rest/content/items/e2e2fa4b2ed84182a8dad2d3d77097a3/data",
        parameters: "https://uofu.maps.arcgis.com/sharing/rest/content/items/5036ead16a224cc68c762c5c25476a38/data"
      },
      "Hyrum Transect (A)": {
        plot:       "https://uofu.maps.arcgis.com/sharing/rest/content/items/77d3a3b837714c5e9e0bcfb5e11c8b9f/data",
        parameters: "https://uofu.maps.arcgis.com/sharing/rest/content/items/9987285a68f1475fbd25bbcbd2784cb0/data"
      }
    };

    function showContainer(id) {
      containers.forEach(c => c.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    document.querySelectorAll('[data-action]').forEach(btn => {
      btn.addEventListener('click', () => {
        const action = btn.dataset.action;

        if (action === 'openSubmenu') {
          const target   = btn.dataset.target;
          const transect = btn.dataset.transect;

          if (target === 'transectMenu') {
            headerTitle.textContent = 'Transects';
          } else if (transect) {
            headerTitle.textContent = transect;
          } else if (target === 'ionMenu') {
            headerTitle.textContent += ' – ' + btn.textContent;
          }

          if (transect) currentTransect = transect;
          showContainer(target);

        } else if (action === 'back') {
          const prev = btn.dataset.target;

          if (prev === 'mainMenu') {
            headerTitle.textContent = 'Data Selector';
          } else if (prev === 'transectMenu') {
            headerTitle.textContent = 'Transects';
          } else if (prev === 'plotTypeMenu') {
            headerTitle.textContent = currentTransect;
          }

          showContainer(prev);

        } else if (action === 'showPlot') {
          let url = btn.dataset.url ||
                    data[currentTransect][btn.dataset.urlField];

          // replace welcome text with the selected plot
          document.getElementById('plotContainer').innerHTML =
            `<img src="${url}" alt="Plot">`;
        }
      });
    });

    // start on the main menu
    showContainer('mainMenu');
  </script>

</body>
</html>
